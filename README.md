# Yadro-testing-tasks

Данный репозиторий необходим для демонстрации решения тестового задания для **Telecom DevOps**

Ссылка на тестовое задание: https://drive.yadro.com/s/2yx44JS667o4Wfm

Перейдём к разбору решения:

## Раздел 1: Работа со скриптом

**Цель:** Требуется разработать скрипт, который выполняет 5 разных HTTP-запросов к сервису https://httpstat.us и обрабатывает ответы следующим образом:
- При получении статус-кодов 1xx, 2xx, 3xx- логировать содержимое ответа (как минимум статус-код и тело ответа)
- При получении статус-кодов 4xx и 5xx - генерировать исключительную ситуацию (exception).
- Результат скрипта необходимо логировать в консоль.

**Решение:** для этого задания я написал скрипт на python, который обращается ко всем пяти видам статус кодов, чтобы автоматически полноценно проверять работу скрипта. В частности для кодов 1xx, я поставил timeout равный 1 секнуде, для всех остальных по умолчанию timeout равен 5 секундам.

Для логирования я использую библиотеку loguru, которая предоставляет удобный функционал из коробки

## Раздел 2: Работа с Docker

**Цель:** Разработать Docker-образ на базе Ubuntu 22.04, содержащий:
- Bash-скрипт/python-скрипт (из первого раздела).
- Все необходимые зависимости для его корректного выполнения.

**Решение:** написал небольшой Dockerfile, для стандартного приложения на python

В дополнение к Dockerfile, написал небольшой скрипт, запустив который произойдёт автоматическая сверка актуальной версии файлов, чтобы в случае чего заменить на актуальные, далее скрипт запустит создание docker билда (заранее скрипт попросит указать версию образа). После успешного создания образа, он автоматически запуститься

## Раздел 3: Автоматизация процесса с помощью Ansible

**Цель:** Автоматизировать с помощью Ansible процесс:
- Установки Docker на целевом хосте (локальном или удаленном).
- Проверки на целевом хосте работоспособность Bash-скрипта/python-скрипта внутри Docker-контейнера (аналогично 2 разделу, проверка работоспособности через docker logs)
- Доп. задание, по желанию, реализовать автоматическую проверку вместо docker logs на хосте, выполнить docker logs с помощью ansible.

**Решение:** написал playbook, где устанавливаю docker в систему, при условии его отсутсвия. Потом устанавливаю python, если его тоже нет в системе. Подтягиваю все зависимости необходимые для запуска docker контейнера и приложения соответсвенно. И после отработки контейнера вывожу через результат выполнения контейнера через **docker logs**

# Завершение

Спасибо за интересные задания! В ходе выполнения вспомнил некоторые базовые вещи и попрактиковался в этих темах!

Всего доброго\)
